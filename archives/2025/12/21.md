### 目次 {#table-of-contents}
1. [#122652 Add NoInlining and NoOptimization attributes to ClearWaitSleepJoinState method](#122652)
2. [#122534 Fix UInt128 to double conversion for values >= 2^104](#122534)

---
### [#122652](https://github.com/dotnet/runtime/pull/122652) Add NoInlining and NoOptimization attributes to ClearWaitSleepJoinState method {#122652}
- 作成者: [@Copilot](https://github.com/apps/copilot-swe-agent)
- 作成日時: 2025年12月18日 21:28:03(UTC)
- マージ日時: 2025年12月21日 17:32:13(UTC)
- ラベル: <span style="background-color: #d4c5f9; color: #000000; display: inline-block; padding: 0 7px; font-size:12px; font-weight:500; line-height:18px; border-radius:2em; border:1px solid transparent; white-space:nowrap; cursor:default;">area-CodeGen-coreclr</span>
#### 概要
issue #122479で発生するスレッド待機/スリープ/結合状態の遷移に関連した実行時エラーを回避するため、`Thread.ClearWaitSleepJoinState()`メソッドに`NoInlining`と`NoOptimization`属性を追加する一時的な対応です。コンパイラの問題的な最適化を抑制することで、GCストレステストにおける問題を軽減します。

#### 変更内容
- **ファイル**: `src/coreclr/System.Private.CoreLib/src/System/Threading/Thread.CoreCLR.cs`
- **変更内容**: `ClearWaitSleepJoinState()`メソッドに以下の属性を追加
  ```csharp
  [MethodImpl(MethodImplOptions.NoInlining | MethodImplOptions.NoOptimization)]
  ```
- **コメント追加**: issue #122479を参照する一時対応用のコメントを付記

#### パフォーマンスへの影響
**軽微な懸念あり**: このメソッドの最適化が無効化されるため、当該メソッドの性能最適化ポテンシャルは低下します。ただし内部メソッドの単一メソッドに限定された変更であり、全体的な機能への影響はありません。機能的な劣化はなく、防御的な属性付与により問題の再発を防止します。

#### 関連Issue
- **#122479**: スレッド状態遷移に関連した実行時エラー

#### その他
- テスト: System.Threading.Thread.Tests合格（53テスト、失敗0件）
- リスク評価: 低（最小限の変更であり、既知問題の暫定対応）
- このPRは一時的なワークアラウンドです。根本的な解決は今後の別PR対応予定と推測されます

---
### [#122534](https://github.com/dotnet/runtime/pull/122534) Fix UInt128 to double conversion for values >= 2^104 {#122534}
- 作成者: [@sdcb](https://github.com/sdcb)
- 作成日時: 2025年12月14日 09:33:04(UTC)
- マージ日時: 2025年12月21日 00:03:12(UTC)
- ラベル: <span style="background-color: #d4c5f9; color: #000000; display: inline-block; padding: 0 7px; font-size:12px; font-weight:500; line-height:18px; border-radius:2em; border:1px solid transparent; white-space:nowrap; cursor:default;">area-System.Numerics</span> <span style="background-color: #c2e0c6; color: #000000; display: inline-block; padding: 0 7px; font-size:12px; font-weight:500; line-height:18px; border-radius:2em; border:1px solid transparent; white-space:nowrap; cursor:default;">community-contribution</span>
#### 概要
UInt128からdoubleへの変換において、2^104以上の値で発生していた精度喪失の問題を修正しました。この問題はInt128にも同様に存在したため、両方の型で修正されています。変換ロジックの微調整により、大きな整数値からの浮動小数点変換の正確性が向上します。

#### 変更内容
- **System.Private.CoreLib/System/UInt128.cs**: UInt128からdoubleへの変換ロジックを修正（2行変更）
- **System.Runtime.Tests/System/UInt128Tests.cs**: UInt128の変換テストケースを21件追加
- **System.Runtime.Tests/System/Int128Tests.cs**: Int128の変換テストケースを29件追加

新しいテストケースでは、2^104以上の大きな値を含む境界値に対する変換精度が検証されています。

#### パフォーマンスへの影響
影響なし

修正は変換ロジックの改善であり、パフォーマンスクリティカルなパスの変更ではありません。

#### 関連Issue
#122203

#### その他
- 本修正は`release/10.0`ブランチへのバックポート予定あり
- Int128とUInt128の両方の型で同じ問題が存在したため、統一的に修正されました
- 複数のレビュアー（huoyaoyuan、tannergooding等）によって承認済みです

---
