### 目次 {#table-of-contents}
1. [#122652 Add NoInlining and NoOptimization attributes to ClearWaitSleepJoinState method](#122652)
2. [#122534 Fix UInt128 to double conversion for values >= 2^104](#122534)

---
### [#122652](https://github.com/dotnet/runtime/pull/122652) Add NoInlining and NoOptimization attributes to ClearWaitSleepJoinState method {#122652}
- 作成者: [@Copilot](https://github.com/apps/copilot-swe-agent)
- 作成日時: 2025年12月18日 21:28:03(UTC)
- マージ日時: 2025年12月21日 17:32:13(UTC)
- ラベル: <span style="background-color: #d4c5f9; color: #000000; display: inline-block; padding: 0 7px; font-size:12px; font-weight:500; line-height:18px; border-radius:2em; border:1px solid transparent; white-space:nowrap; cursor:default;">area-CodeGen-coreclr</span>
#### 概要
issue #122479で報告されたスレッド待機/スリープ/結合状態遷移時の実行時失敗を回避するため、`Thread.ClearWaitSleepJoinState()`メソッドに`NoInlining`と`NoOptimization`属性を追加する一時的なワークアラウンド。コンパイラ最適化による問題を防ぐ最小限の変更です。

```csharp
[MethodImpl(MethodImplOptions.NoInlining | MethodImplOptions.NoOptimization)]
private static void ClearWaitSleepJoinState()
{
    // ...
}
```

#### 変更内容
- **ファイル**: `src/coreclr/System.Private.CoreLib/src/System/Threading/Thread.CoreCLR.cs`
- **変更**: `ClearWaitSleepJoinState()`メソッドに`[MethodImpl(MethodImplOptions.NoInlining | MethodImplOptions.NoOptimization)]`属性を追加
- **コメント**: issue #122479を参照する一時的なワークアラウンド説明を追加
- **影響範囲**: 内部メソッドのみ、関連するテスト（53件）はすべてパス

#### パフォーマンスへの影響
**懸念点**: 当該メソッドに対するコンパイラ最適化が無効化されるため、わずかなパフォーマンス低下の可能性あり。ただし、内部メソッドであり、頻繁に呼び出されないため実質的な影響は限定的と予想されます。

#### 関連Issue
- #122479: スレッド待機/スリープ/結合状態遷移での実行時失敗
- GC stress テストで大量の失敗を発生させていた問題

#### その他
- 低リスク変更（3行の最小限コード）
- 一時的なワークアラウンドであり、根本的な修正ではない
- 機能的な影響なし、完全なregresssionではない

---
### [#122534](https://github.com/dotnet/runtime/pull/122534) Fix UInt128 to double conversion for values >= 2^104 {#122534}
- 作成者: [@sdcb](https://github.com/sdcb)
- 作成日時: 2025年12月14日 09:33:04(UTC)
- マージ日時: 2025年12月21日 00:03:12(UTC)
- ラベル: <span style="background-color: #d4c5f9; color: #000000; display: inline-block; padding: 0 7px; font-size:12px; font-weight:500; line-height:18px; border-radius:2em; border:1px solid transparent; white-space:nowrap; cursor:default;">area-System.Numerics</span> <span style="background-color: #c2e0c6; color: #000000; display: inline-block; padding: 0 7px; font-size:12px; font-weight:500; line-height:18px; border-radius:2em; border:1px solid transparent; white-space:nowrap; cursor:default;">community-contribution</span>
#### 概要
UInt128からdoubleへの変換において、2^104以上の値で発生していた変換エラーを修正しました。Int128にも同じ問題が存在していたため、両方の型に対応する修正を実装しています。テストケースも追加され、変換精度が向上しました。

#### 変更内容
- **src/libraries/System.Private.CoreLib/src/System/UInt128.cs** (+2/-2)
  - UInt128からdoubleへの変換ロジックを修正（2行修正）

- **src/libraries/System.Runtime/tests/System.Runtime.Tests/System/Int128Tests.cs** (+29)
  - Int128のdouble変換テストケースを追加

- **src/libraries/System.Runtime/tests/System.Runtime.Tests/System/UInt128Tests.cs** (+21)
  - UInt128のdouble変換テストケース（特に2^104以上の値）を追加

#### パフォーマンスへの影響
影響なし。本修正は数値変換の正確性を改善するもので、パフォーマンス面での変化はありません。

#### 関連Issue
- #122203（修正対象のIssue）

#### その他
- レビュープロセスにより複数の開発者が確認済み
- release/10.0ブランチへのバックポートが実施予定
- Int128とUInt128の両方の型に適用される共通の修正内容です

---
